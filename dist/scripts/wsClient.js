const http=require("http"),{createParser}=require("eventsource-parser"),args=process.argv.slice(2),baseUrl=args[0]||"http://localhost:3000";function connect(){const e=http.get(baseUrl,(e=>{if(200===e.statusCode){console.log("Connected to SSE server");const o=createParser((e=>{if("event"===e.type)try{const o=JSON.parse(e.data);console.log("Received:",JSON.stringify(o,null,2))}catch(o){console.log("Received raw data:",e.data)}}));e.on("data",(e=>{o.feed(e.toString())})),e.on("end",(()=>{console.log("Connection closed by server"),setTimeout(connect,1e3)}))}else console.error("Unexpected status code:",e.statusCode),setTimeout(connect,1e3)}));e.on("error",(e=>{console.error("Connection error:",e.message),setTimeout(connect,1e3)})),process.on("SIGINT",(()=>{e.destroy(),console.log("Connection closed"),process.exit()}))}console.log("Connecting to SSE server at:",baseUrl),connect();